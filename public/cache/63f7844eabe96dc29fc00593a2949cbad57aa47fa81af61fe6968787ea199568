async function feedPage(){var e=window.location.pathname.split("/").slice(-1);"course"==e||"group"==e?(await asideFeedPage(),await courseFeedPage()):"detail"==e&&await courseDetailFeedPage()}function asideFeedPage(){$.ajax({url:local_api+"course/aside",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content")})}).done(function(t){if(fail=0,console.log(t),0<t.total){var a=$(".ministrychoose > ministrymode");for(let e=0;e<t.total;e++)0<e&&a.clone().insertAfter(a),$(".ministrychoose  > div.ministrymode:eq("+e+") ").text(t.data[e].group_subject);for(let e=0;e<t.total;e++)$(".ministrychoose  > div.ministrymode:eq("+e+") ").text(t.data[e].group_subject)}}).fail(async function(){fail<3&&(await refreshtoken(),await asideFeedPage(),fail++)})}function courseFeedPage(){$.ajax({url:local_api+"course/page",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content"),group:course_group,profileID:getCookie("cookieProfileID")||0})}).done(function(t){fail=0;site_path;if(0<t.result){$("h4.heading-subject-text").text(t.group[0].subject),course_group=t.group[0].id;var a=t.data[0].course_data.length,o=$("#course-block > div.course-block-detail");if(0==a)o.remove();else{$("#course-block > div.course-block-zero").remove();for(let e=0;e<a;e++)0<e&&o.clone().insertAfter(o);var i=site_path+"/course/";for(let e=0;e<a;e++){var r=path_validate(t.data[0].course_data[e].cover,location_file),r=($("#course-choose > div:eq("+e+") picture > img").attr({src:r,alt:t.data[0].course_data[e].subject}).height(185),$("#course-choose > div:eq("+e+") .card-body h2").text(t.data[0].course_data[e].subject),$("#course-choose > div:eq("+e+") .card-body var.price").text(t.data[0].course_data[e].price),t.data[0].course_data[e].course_id);$("#course-choose > div:eq("+e+") > div.card a").attr("href",i+r+"/detail"),$("#course-choose > div:eq("+e+") > div.card .card-footer a").attr("id","course"+r),t.data[0].course_data[e].congratulation<2&&$("#course"+r).text(registered_txt).removeClass("btn-primary-theme").addClass("btn-success").attr("href",site_path+"/lms")}}}else $("#course-choose > div.course-block-detail").remove()}).fail(async function(){fail<3&&(await refreshtoken(),await courseFeedPage(),fail++)})}function courseDetailFeedPage(){}function addtofavorites(t){var e=+getCookie("cookieProfileID")||0;0==e?window.location.href=site_path+"/login":$.ajax({url:local_api+"course/favorites",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content"),profileID:e,course:t})}).done(function(e){1==e.result?(e=$(".addtofavorites").data("original-title2"),$("#addtofavorites__"+t).addClass("active").attr("title",e)):(e=$(".addtofavorites").data("original-title"),$("#addtofavorites__"+t).removeClass("active").attr("title",e))}).fail(async function(){fail<3&&(await refreshtoken(),await courseFeedPage(),fail++)})}$("#submitCourse").on("click",function(e){e.preventDefault();e=getCookie("cookieProfileID")||0;0==e?window.location.href=site_path+"/login":$.ajax({url:local_api+"course/register",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content"),profileID:+e,course:$("#submitCourse").data("id")})}).done(function(e){var t=site_path+"/course/"+$("#submitCourse").data("id")+"/detail/successful";window.location.href=t}).fail(async function(){fail<3&&(await refreshtoken(),await courseFeedPage(),fail++)})});