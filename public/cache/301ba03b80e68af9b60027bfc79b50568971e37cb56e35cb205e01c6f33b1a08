let access_token,refresh_token;const api_path=$("meta[name=api_path]").attr("content"),api_project=$("meta[name=api_project]").attr("content"),site_path=$("link[rel=canonical]").attr("href"),page_language=$("html").attr("lang"),location_origin=window.location.origin,location_file=$("meta[name=file_project]").attr("content"),local_api=location_origin+"/api/",loginsettings={url:local_api+"auth/login",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({name:api_project})};function refreshtoken(){var e={url:local_api+"auth/refresh",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+refresh_token}};$.ajax(e).done(function(e){access_token=e.access_token,refresh_token=e.refresh_token})}function getCookie(e){const t=e+"=";e=decodeURIComponent(document.cookie).split("; ");let n;return e.forEach(e=>{0===e.indexOf(t)&&(n=e.substring(t.length))}),n}function path_validate(e,t){let n;var a=new RegExp("^(?:[a-z]+:)?//","i");return n=a.test(e)?e:t+e}function likePage(e,t,n){let a=local_api;"news"==n?a+="news/like":"blog"==n&&(a+="ebook/like"),$.ajax({url:a,method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content"),id:e,profile:t})}).done(function(t){if((fail=0)<t.total)window.location.reload();else{let e=$("#showlike").text();0==t.status?($("#likeNews").removeClass("fas").addClass("far"),e=+e-1):1==t.status&&($("#likeNews").removeClass("far").addClass("fas"),e=+e+1),$("#showlike").text(e)}}).fail(async function(){fail<3&&(await refreshtoken(),await likePage(e),fail++)})}function cb(e){var t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("name","g-recaptcha-response"),t.setAttribute("value",e),document.getElementsByTagName("form")[0].appendChild(t)}$(window).on("load",async function(){$(".js-mega-menu").HSMegaMenu({event:"hover",pageContainer:$(".container"),breakpoint:767.98,hideTimeOut:0}),$(".js-breadcrumb-menu").HSMegaMenu({event:"hover",pageContainer:$(".container"),breakpoint:991.98,hideTimeOut:0}),$.HSCore.components.HSHeader.init($("#header")),$.HSCore.components.HSUnfold.init($("[data-unfold-target]"),{afterOpen:function(){$(this).find('input[type="search"]').focus()}}),$.HSCore.components.HSSVGIngector.init(".js-svg-injector"),await $.ajax(loginsettings).done(function(e){access_token=e.access_token,refresh_token=e.refresh_token,feedPage()}).fail(function(){}),$("#acceptterms").change(function(){this.checked&&$(this).prop("checked",$("#nextbutton").removeClass("d-none").find("button").prop("disabled",!1)),$(this).is(":checked")||$("#nextbutton").addClass("d-none").find("button").prop("disabled",!0)}),$("#linkforgotpassword").click(function(){$("div#forgotPassword").removeAttr("style"),$("div#login").hide()})}),$(document).on("submit","form#form-login",function(e){e.preventDefault();e={username:$("#signinEmail").val(),password:$("#signinPassword").val(),project:api_project,sidebar:!0};$.post(site_path+"/signin",e).done(function(e){window.location.reload()}).fail(function(){window.location.href=site_path+"/login-error"})}),$(document).ready(function(e){$(document).on("click","button.u-hamburger",function(e){$("#navBar").hasClass(),$("#navBar").hasClass("show")?($("#navBar").toggleClass("show"),$(".u-hamburger").attr("aria-expanded",!1)):($("#navBar").toggleClass("show"),$(".u-hamburger").attr("aria-expanded",!0))})}),$(function(){var n=null;"en"==page_language?$("#recoverDate").datepicker({dateFormat:"dd-mm-yy",showOn:"button",buttonImageOnly:!1}):"th"==page_language&&$("#recoverDate").datepicker({dateFormat:"dd-mm-yy",showOn:"button",buttonImageOnly:!1,dayNamesMin:["อา","จ","อ","พ","พฤ","ศ","ส"],monthNamesShort:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],changeMonth:!0,changeYear:!0,beforeShow:function(){var e;""!=$(this).val()&&((e=$(this).val().split("-"))[2]=parseInt(e[2])-543,$(this).val(e[0]+"-"+e[1]+"-"+e[2])),setTimeout(function(){$.each($(".ui-datepicker-year option"),function(e,t){var n=parseInt($(".ui-datepicker-year option").eq(e).val())+543;$(".ui-datepicker-year option").eq(e).text(n)})},50)},onChangeMonthYear:function(){setTimeout(function(){$.each($(".ui-datepicker-year option"),function(e,t){var n=parseInt($(".ui-datepicker-year option").eq(e).val())+543;$(".ui-datepicker-year option").eq(e).text(n)})},50)},onClose:function(){var e;""!=$(this).val()&&$(this).val()==n&&((e=n.split("-"))[2]=parseInt(e[2])+543,$(this).val(e[0]+"-"+e[1]+"-"+e[2]))},onSelect:function(e,t){n=$(this).val();e=e.split("-");e[2]=parseInt(e[2])+543,$(this).val(e[0]+"-"+e[1]+"-"+e[2])}})});