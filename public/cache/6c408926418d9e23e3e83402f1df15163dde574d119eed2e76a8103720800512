var horizontalProgressBars=$.HSCore.components.HSProgressBar.init(".js-hr-progress",{direction:"horizontal",indicatorSelector:".js-hr-progress-bar"});let access_token,refresh_token;const api_path=$("meta[name=api_path]").attr("content"),api_project=$("meta[name=api_project]").attr("content"),site_path=$("link[rel=canonical]").attr("href"),location_origin=window.location.origin,local_api=location_origin+"/api/";let congratulationStatus=0;const loginsettings={url:local_api+"auth/login",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({name:api_project})};function refreshtoken(){var t={url:local_api+"auth/refresh",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+refresh_token}};$.ajax(t).done(function(t){access_token=t.access_token,refresh_token=t.refresh_token}).fail(async function(t){await $.ajax(loginsettings).done(function(t){access_token=t.access_token,refresh_token=t.refresh_token})})}function getCookie(t){const e=t+"=";t=decodeURIComponent(document.cookie).split("; ");let o;return t.forEach(t=>{0===t.indexOf(e)&&(o=t.substring(e.length))}),o}function congratulation(t,e){0==congratulationStatus&&$.ajax({url:site_path+"lms/congratulation",method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify({pageID:t,lessonID:e})}).done(function(t){})}$(window).on("load",async function(){await $.ajax(loginsettings).done(function(t){access_token=t.access_token,refresh_token=t.refresh_token})}),$("#basicsAccordion a").on("click",function(){var t=$(this).attr("href");$("#basicsAccordion > div:not("+t+")").removeClass("show"),$(t).toggleClass("show")}),$("span.hide_lesson_result").on("click",function(){$("span.hide_lesson_result").hasClass("show_lesson_result")?($("span.hide_lesson_result").removeClass("show_lesson_result"),$("span.lesson_result > span").fadeOut("slow")):($("span.hide_lesson_result").addClass("show_lesson_result"),$("span.lesson_result > span").fadeIn("slow"))}),$("#exerciseDetails .card-btn-arrow").on("click",function(){var t=$(this).data("id");$("#exercise"+t+" > .card-collapse .card-btn-arrow").toggleClass("card-inactive"),$("#exercise"+t+" > .collapse").toggleClass("show")}),$("#scoreDetails #pills-tab a").on("click",function(){var t=$(this).attr("href");$("#scoreDetails .tab-pane , #scoreDetails a.nav-link").removeClass("active show"),$(t).addClass("active show"),$(this).addClass("active"),$(t).find(".progress-bar").each(function(t,e){var o=$(this).text();$(this).width(o)})});let contact_id=0;function contact_user(t,e){$("#modal-contactus").css("background-color","rgba(0,0,0,0.5)").show().addClass("show"),$("#modal-contactus h4.modal-title span").text(e),contact_id=t}function contact_close(){$("#modal-contactus").hide().removeClass("show"),$("#msg_send").val(""),$("#msg_status").text(""),contact_id=0}function contact_send(){var t=$("#msg_send").val();""==t?$("#msg_status").css("color","red").text("กรุณาระบุข้อความ"):$.ajax({url:local_api+"lms/contact",method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({contact:contact_id,msg:t,pageID:pageID,profileID:getCookie("cookieProfileID")||0})}).done(function(t){$("#msg_status").css("color","green").text("ส่งข้อความสำเร็จ"),setTimeout(contact_close,1e3)})}function gotobigbluebutton(t,e,o){$.post(t+"/join_bbb.php",{meeting:e,role:o,username:getCookie("cookieProfileName")}).done(function(t){window.open(t)})}