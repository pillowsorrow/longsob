!function(y,t){"use strict";function l(t){return t.cloneNode(!0)}function e(t,e){f[t]=f[t]||[],f[t].push(e)}function s(g,h,t,m){var e,b=g.getAttribute("data-src")||g.getAttribute("src");/\.svg/i.test(b)?n?-1===w.indexOf(g)&&(w.push(g),g.setAttribute("src",""),i(b,function(i){if(void 0===i||"string"==typeof i)return m(i),!1;var t=g.getAttribute("id"),t=(t&&i.setAttribute("id",t),g.getAttribute("title")),t=(t&&i.setAttribute("title",t),[].concat(i.getAttribute("class")||[],"injected-svg",g.getAttribute("class")||[]).join(" ")),t=(i.setAttribute("class",function(t){for(var e={},r=(t=t.split(" ")).length,n=[];r--;)e.hasOwnProperty(t[r])||(e[t[r]]=1,n.unshift(t[r]));return n.join(" ")}(t)),g.getAttribute("style")),t=(t&&i.setAttribute("style",t),[].filter.call(g.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)}));v.call(t,function(t){t.name&&t.value&&i.setAttribute(t.name,t.value)});var o,a,l,s,u={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(u).forEach(function(t){a=u[t];for(var n,e=0,r=(o=i.querySelectorAll("defs "+t+"[id]")).length;e<r;e++)l=o[e].id,s=l+"-"+A,v.call(a,function(t){for(var e=0,r=(n=i.querySelectorAll("["+t+'*="'+l+'"]')).length;e<r;e++)n[e].setAttribute(t,"url(#"+s+")")}),o[e].id=s}),i.removeAttribute("xmlns:a");for(var e,r=i.querySelectorAll("script"),n=[],c=0,f=r.length;c<f;c++)(e=r[c].getAttribute("type"))&&"application/ecmascript"!==e&&"application/javascript"!==e||(e=r[c].innerText||r[c].textContent,n.push(e),i.removeChild(r[c]));if(0<n.length&&("always"===h||"once"===h&&!x[b])){for(var p=0,d=n.length;p<d;p++)new Function(n[p])(y);x[b]=!0}t=i.querySelectorAll("style");v.call(t,function(t){t.textContent+=""}),g.parentNode.replaceChild(i,g),delete w[w.indexOf(g)],g=null,A++,m(i)})):(e=g.getAttribute("data-fallback")||g.getAttribute("data-png"))?(g.setAttribute("src",e),m(null)):t?(g.setAttribute("src",t+"/"+b.split("/").pop().replace(".svg",".png")),m(null)):m("This browser does not support SVG and no PNG fallback was defined."):m("Attempted to inject a file with a non-svg extension: "+b)}function r(e,t,r){var n,i=(t=t||{}).evalScripts||"always",o=t.pngFallback||!1,a=t.each;void 0!==e.length?(n=0,v.call(e,function(t){s(t,i,o,function(t){a&&"function"==typeof a&&a(t),r&&e.length===++n&&r(n)})})):e?s(e,i,o,function(t){a&&"function"==typeof a&&a(t),r&&r(1),e=null}):r&&r(0)}var u="file:"===y.location.protocol,n=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),v=Array.prototype.forEach||function(t,e){if(null==this||"function"!=typeof t)throw new TypeError;for(var r=this.length>>>0,n=0;n<r;++n)n in this&&t.call(e,this[n],n,this)},c={},A=0,w=[],f=[],x={},i=function(i,o){if(void 0!==c[i])c[i]instanceof SVGSVGElement?o(l(c[i])):e(i,o);else{if(!y.XMLHttpRequest)return o("Browser does not support XMLHttpRequest"),!1;c[i]={},e(i,o);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState){if(404===a.status||null===a.responseXML)return o("Unable to load SVG file: "+i),u&&o("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),o(),!1;if(!(200===a.status||u&&0===a.status))return o("There was a problem injecting the SVG: "+a.status+" "+a.statusText),!1;if(a.responseXML instanceof Document)c[i]=a.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){try{var e=(new DOMParser).parseFromString(a.responseText,"text/xml")}catch(t){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)return o("Unable to parse SVG file: "+i),!1;c[i]=e.documentElement}for(var r=i,t=0,n=f[r].length;t<n;t++)!function(t){setTimeout(function(){f[r][t](l(c[r]))},0)}(t)}},a.open("GET",i),a.overrideMimeType&&a.overrideMimeType("text/xml"),a.send()}};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=r:"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof y&&(y.SVGInjector=r)}(window,document);