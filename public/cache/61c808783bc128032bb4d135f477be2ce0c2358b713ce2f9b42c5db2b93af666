async function feedPage(){var e=window.location.pathname.split("/").slice(-1);"course"==e||"group"==e?(await asideFeedPage(),await courseFeedPage()):"detail"==e&&await courseDetailFeedPage()}function asideFeedPage(){$.ajax({url:local_api+"course/aside",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content")})}).done(function(a){if((fail=0)<a.total){var t=$(".ministrychoose > .ministrymode");for(let e=0;e<a.total;e++)0<e&&(t.clone().insertAfter(t),$("<hr class='my-12 btn-dark' />").insertAfter(t));for(let e=0;e<a.total;e++)$(".ministrychoose  > .ministrymode:eq("+e+") ").text(a.data[e].group_subject),console.log(a.data[e])}}).fail(async function(){fail<3&&(await refreshtoken(),await asideFeedPage(),fail++)})}function courseFeedPage(){$.ajax({url:local_api+"course/page",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content"),group:course_group,profileID:getCookie("cookieProfileID")||0})}).done(function(a){fail=0;site_path;if(0<a.result){$("h4.heading-subject-text").text(a.group[0].subject),course_group=a.group[0].id;var t=a.data[0].course_data.length,o=$("#course-new > div.course-block-detail-new");if(0==t)o.remove();else{$("#course-blockchoose > div.course-block-detail-new").remove();for(let e=0;e<t;e++)0<e&&o.clone().insertAfter(o);var i=site_path+"/course/";for(let e=0;e<t;e++){var r=path_validate(a.data[0].course_data[e].cover,location_file),r=($("#course-block-choose > div:eq("+e+") img").attr({src:r,alt:a.data[0].course_data[e].subject}).height(185),$("#course-block-choose  > div:eq("+e+") .card-body p").text(a.data[0].course_data[e].subject),$("#course-block-choose  > div:eq("+e+") .card-body ").text(a.data[0].course_data[e].price),a.data[0].course_data[e].course_id);$("#course-block-choose  > div:eq("+e+") > div.card a").attr("href",i+r+"/detail"),$("#course-block-choose  > div:eq("+e+") > div.card .card-footer a").attr("id","course"+r),a.data[0].course_data[e].congratulation<2&&$("#course"+r).text(registered_txt).removeClass("btn-primary-theme").addClass("btn-success").attr("href",site_path+"/lms")}}}else $("#course-block-choose > div.course-block-detail-new").remove()}).fail(async function(){fail<3&&(await refreshtoken(),await courseFeedPage(),fail++)})}function courseDetailFeedPage(){}function addtofavorites(a){var e=+getCookie("cookieProfileID")||0;0==e?window.location.href=site_path+"/login":$.ajax({url:local_api+"course/favorites",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content"),profileID:e,course:a})}).done(function(e){1==e.result?(e=$(".addtofavorites").data("original-title2"),$("#addtofavorites__"+a).addClass("active").attr("title",e)):(e=$(".addtofavorites").data("original-title"),$("#addtofavorites__"+a).removeClass("active").attr("title",e))}).fail(async function(){fail<3&&(await refreshtoken(),await courseFeedPage(),fail++)})}$("#submitCourse").on("click",function(e){e.preventDefault();e=getCookie("cookieProfileID")||0;0==e?window.location.href=site_path+"/login":$.ajax({url:local_api+"course/register",method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+access_token},data:JSON.stringify({lang:$("html").attr("lang"),project:$('meta[name="api_project"]').attr("content"),profileID:+e,course:$("#submitCourse").data("id")})}).done(function(e){var a=site_path+"/course/"+$("#submitCourse").data("id")+"/detail/successful";window.location.href=a}).fail(async function(){fail<3&&(await refreshtoken(),await courseFeedPage(),fail++)})});